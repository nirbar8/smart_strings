#!/bin/python

'''
This script is used to extract related words to given word.
1) Go to https://relatedwords.io/
2) Enter a word, e.g. "malware"
3) Press F12 and save the copy the section of the words. The relevant section is: "<ul id="terms-list"> ..."
4) Save the html section to a file, e.g. "words_malware.html"
5) Run this script to extract the words and save them to a file, e.g. "words_malware.pickle"
This will save a list of words to a file using pickle.
Note that the words are sorted by their relevance to the given word and that might be useful.
'''

import pickle
import re
file_name = 'words_malware'

# read html file
with open(file_name + '.html', 'r') as f:
    html = f.read()

# extract all words from the strucutre: <a href=*>word</a> -> "word"
words = re.findall(r'<a href=".*">(.*)</a>', html)
words = [word for word in words if '&' not in word]  # removing unrelated tags

# remove words that are too short
words = [word for word in words if len(word) > 3]

# remove duplicates but keep order
words = list(dict.fromkeys(words))

# write words to file
with open(file_name + '.pickle', 'wb') as f:
    pickle.dump(words, f)
